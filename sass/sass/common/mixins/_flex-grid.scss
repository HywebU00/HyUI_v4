// 父層啟動flex： @extend %flex_set;
// @for $i from 1 through 12 {}

////////////////////////////////////////////////////
////////////////// 均分 equal         //////////////
////////////////// xs - lg min-weidth //////////////
////////////////////////////////////////////////////

// 均分計算公式
@mixin equalFormula($col, $m-gutter) {
  // 啟動計算公式 ------
  // 欄數（$col）、欄距（$m-gutter）
  flex-basis: calc(100% / #{$col} - #{$m-gutter});
  max-width: calc(100% / #{$col} - #{$m-gutter});

  @if $col == 2 {
    &:last-child {
      @for $i from 1 through 12 {
        &:nth-child(12n -#{$i}) {
          margin-right: 0;
        }
      }
    }
  } @else if $col == 1 {
    &:last-child {
      margin-right: 0;
    }
  } @else {
    @for $i from 1 through ($col - 1) {
      &:last-child {
        &:nth-child(#{$col}n) {
          margin-right: 0;
        }
        &:nth-child(#{$col}n - #{$i}) {
          margin-right: calc((100% / #{$col} - #{$m-gutter}) *#{$i} + (#{$m-gutter}*#{$col}) *#{$i} / (#{$col} - 1));
        }
      }
    }
  }
}
// 極小尺寸
// $screen-xs-flex: 320px !default;
// 預設情況：最多4欄
@mixin flex-xs-equal($col, $m-gutter) {
  @media (min-width: $screen-xs-flex) {
    @include equalFormula($col, $m-gutter);
  }
}

// 手機
// $screen-sm: 768px !default;
// 預設情況：1-12欄
@mixin flex-sm-equal($col, $m-gutter) {
  @media (min-width: $screen-sm) {
    @include equalFormula($col, $m-gutter);
  }
}

// 平板
// $screen-md: 992px !default;
// 預設情況：1-12欄
@mixin flex-md-equal($col, $m-gutter) {
  @media (min-width: $screen-md) {
    @include equalFormula($col, $m-gutter);
  }
}

// 電腦
// $screen-lg: 1400px !default;
// 預設情況：1-12欄
@mixin flex-lg-equal($col, $m-gutter) {
  @media (min-width: $screen-lg) {
    @include equalFormula($col, $m-gutter);
  }
}

// 範例：
// 子層 - 自訂欄寬
// .col{
//   @include flex-xs-equal(1, 0px, $padding);
//   @include flex-sm-equal(2, $margin, $padding);
//   @include flex-md-equal(3, $margin, $padding);
//   @include flex-lg-equal(3, $margin, $padding);
// }

/////////////////////////////////////////////
////////////////// 自訂欄寬 //////////////////
/////////////////////////////////////////////

// 極小尺寸
@mixin gutterFormula($col, $m-gutter) {
  // 啟動計算公式 ------
  // 佔欄數（$col）、欄距（$m-gutter）
  // width ＝ 100% / 12 * 佔幾欄 - 欄距
  flex-basis: calc(100% / 12 * #{$col} - #{$m-gutter});
  max-width: calc(100% / 12 * #{$col} - #{$m-gutter});
}
// $screen-xs-flex: 320px !default;
@mixin flex-xs($col, $m-gutter) {
  @media (min-width: $screen-xs-flex) {
    @include gutterFormula($col, $m-gutter);
  }
}

// 手機
// $screen-sm: 768px !default;
@mixin flex-sm($col, $m-gutter) {
  @media (min-width: $screen-sm) {
    @include gutterFormula($col, $m-gutter);
  }
}

// 平板
// $screen-md: 992px !default;
@mixin flex-md($col, $m-gutter) {
  @media (min-width: $screen-md) {
    @include gutterFormula($col, $m-gutter);
  }
}

// 電腦
// $screen-lg: 1400px !default;
@mixin flex-lg($col, $m-gutter) {
  @media (min-width: $screen-lg) {
    @include gutterFormula($col, $m-gutter);
  }
}

// 範例：
// 子層 - 平均欄寬
// .col{
//   @include flex-xs(1, 0px);
//   @include flex-sm(2, $m-gutter);
//   @include flex-md(3, $m-gutter);
//   @include flex-lg(3, $m-gutter);
// }
